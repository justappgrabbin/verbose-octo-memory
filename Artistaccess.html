<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paper Prime Evo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Fira+Code:wght@400&display=swap" rel="stylesheet">
  <style>
    :root { --paper: #fcfaf2; --ink: #2d3748; }
    body { background: #121212; transition: all 0.5s ease; overflow: hidden; }
    
    /* THE NOTEPAD (Default View) */
    .notebook-container {
      width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .paper {
      width: 100%; max-width: 700px; height: 85vh;
      background: var(--paper); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      padding: 60px; position: relative; border-radius: 2px;
      background-image: repeating-linear-gradient(transparent, transparent 31px, #e5d5c5 31px, #e5d5c5 32px);
    }
    .handwritten { 
      font-family: 'Caveat', cursive; font-size: 2.2rem; color: var(--ink); 
      line-height: 32px; outline: none; min-height: 100%;
    }

    /* THE MODE SHIFT (Hidden UI) */
    .controls {
      position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 15px; opacity: 0.3; transition: opacity 0.3s;
    }
    .controls:hover { opacity: 1; }
    .btn-mode {
      padding: 10px 20px; border-radius: 30px; border: 1px solid #ccc;
      background: white; font-size: 12px; font-weight: bold; cursor: pointer;
    }

    /* REALITY SPLIT (Active View) */
    .split-mode .notebook-container { transform: translateX(-25%); width: 50%; }
    .reality-portal {
      position: fixed; right: -50%; top: 0; width: 50%; height: 100vh;
      background: #000; transition: right 0.8s ease;
      display: flex; flex-direction: column; border-left: 2px solid #333;
    }
    .split-mode .reality-portal { right: 0; }
    
    #world-engine { width: 100%; height: 100%; border: none; background: #fff; }
  </style>
</head>
<body id="master-body">

  <div class="notebook-container">
    <div class="paper">
      <div id="editor" class="handwritten" contenteditable="true">
        Write your vision here...
      </div>
      
      <div class="controls">
        <button class="btn-mode hover:bg-indigo-100" onclick="enterMode('director')">ðŸŽ¬ BE THE DIRECTOR</button>
        <button class="btn-mode hover:bg-emerald-100" onclick="enterMode('artist')">ðŸŽ¨ BE THE ARTIST</button>
      </div>
    </div>
  </div>

  <div class="reality-portal" id="portal">
    <div class="p-4 bg-zinc-900 flex justify-between text-[10px] tracking-widest text-zinc-500">
      <span id="mode-label">GENERATING REALITY...</span>
      <button onclick="exitMode()" class="hover:text-white">CLOSE PORTAL [X]</button>
    </div>
    <iframe id="world-engine"></iframe>
  </div>

<script>
  const body = document.getElementById('master-body');
  const editor = document.getElementById('editor');
  const engine = document.getElementById('world-engine');
  const modeLabel = document.getElementById('mode-label');

  function enterMode(role) {
    body.classList.add('split-mode');
    const content = editor.innerText;
    modeLabel.innerText = role === 'director' ? 'DIRECTOR MODE: AUTO-COMPILING WORLD' : 'ARTIST MODE: RAW ACCESS';
    
    // Simulate Reality Evolution
    if (role === 'director') {
      engine.srcdoc = `
        <body style="background:#000; color:#fff; font-family:sans-serif; display:flex; align-items:center; justify-content:center; height:100vh; text-align:center;">
          <div>
            <h1 style="color:#818cf8">Reality Architecting...</h1>
            <p style="color:#666">Interpreting: "${content.substring(0, 30)}..."</p>
            <div style="margin-top:20px; border:2px solid #818cf8; padding:20px; border-radius:10px;">
                NEW WORLD APP SPAWNED
            </div>
          </div>
        </body>`;
    } else {
      // Artist gets the code view or raw canvas
      engine.srcdoc = `<body style="background:#1e1e1e; color:#0f0; padding:20px; font-family:monospace;">
        <p>// ARTIST RAW ACCESS</p>
        <p>const world = new World({ seed: "${content}" });</p>
        <p>world.render();</p>
      </body>`;
    }
  }

  function exitMode() {
    body.classList.remove('split-mode');
  }

  // Auto-save notepad
  editor.addEventListener('input', () => {
    localStorage.setItem('stealth_note', editor.innerHTML);
  });

  window.onload = () => {
    const saved = localStorage.getItem('stealth_note');
    if (saved) editor.innerHTML = saved;
  };
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paper Prime Evo ðŸŒ±</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Fira+Code:wght@400&display=swap" rel="stylesheet">
  <style>
    :root { --paper: #fcfaf2; --ink: #2d3748; }
    body { background: #0a0a0f; transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; color: white; }
    
    /* THE NOTEPAD (Notepad-JS / Noteshelf Style) */
    .notebook-container {
      width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center;
      transition: all 0.8s ease; z-index: 10;
    }
    .paper {
      width: 100%; max-width: 750px; height: 85vh;
      background: var(--paper); box-shadow: 0 30px 60px rgba(0,0,0,0.8);
      padding: 60px; position: relative; border-radius: 4px;
      background-image: repeating-linear-gradient(transparent, transparent 31px, #e5d5c5 31px, #e5d5c5 32px);
    }
    .handwritten { 
      font-family: 'Caveat', cursive; font-size: 2rem; color: var(--ink); 
      line-height: 32px; outline: none; min-height: 100%; white-space: pre-wrap;
    }

    /* THE EVOLVING PORTAL (The Output World) */
    .portal {
      position: fixed; right: -60%; top: 0; width: 60%; height: 100vh;
      background: #000; transition: right 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      border-left: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column;
    }
    .split-mode .notebook-container { transform: translateX(-30%); }
    .split-mode .portal { right: 0; }

    /* UI CONTROLS */
    .stealth-menu {
      position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 20px; opacity: 0.1; transition: opacity 0.4s;
    }
    .stealth-menu:hover { opacity: 1; }
    .btn-prime {
      padding: 12px 24px; border-radius: 50px; font-weight: bold; font-size: 12px;
      text-transform: uppercase; letter-spacing: 1px; cursor: pointer;
      backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
    }

    /* LOADING STATES */
    .evo-status {
      position: absolute; top: 20px; right: 20px; background: #6366f1;
      padding: 8px 15px; border-radius: 4px; font-family: 'Fira Code', monospace;
      font-size: 12px; display: none;
    }

    iframe { width: 100%; height: 100%; border: none; background: white; }
  </style>
</head>
<body id="master-body">

  <div class="notebook-container">
    <div class="paper">
      <div id="editor" class="handwritten" contenteditable="true" placeholder="Describe your world...">
      </div>
      
      <div class="stealth-menu">
        <button class="btn-prime bg-indigo-600/80" onclick="evolve('director')">ðŸŽ¬ Director Mode</button>
        <button class="btn-prime bg-emerald-600/80" onclick="evolve('artist')">ðŸŽ¨ Artist Mode</button>
        <button class="btn-prime bg-zinc-800" onclick="closePortal()">âœ– Close</button>
      </div>
    </div>
  </div>

  <div class="portal" id="portal">
    <div class="p-4 bg-zinc-900 flex justify-between items-center">
      <div class="text-[10px] tracking-tighter text-zinc-500 font-mono" id="engine-status">ENGINE: STANDBY</div>
      <div class="flex gap-4">
        <button class="text-xs text-indigo-400 hover:text-white" onclick="downloadOutput()">SAVE CODE</button>
      </div>
    </div>
    <div id="loading-bar" class="h-1 bg-indigo-500 w-0 transition-all duration-1000"></div>
    <iframe id="output-frame" title="Reality Output"></iframe>
  </div>

  <div id="evo-notif" class="evo-status">ðŸ§¬ EVOLVING REALITY...</div>

<script>
  const editor = document.getElementById('editor');
  const body = document.getElementById('master-body');
  const frame = document.getElementById('output-frame');
  const loading = document.getElementById('loading-bar');
  const notif = document.getElementById('evo-notif');

  let currentOutput = "";

  async function evolve(role) {
    const prompt = editor.innerText;
    if (!prompt.trim()) return alert("Write something first.");

    // Enter Split Mode
    body.classList.add('split-mode');
    notif.style.display = 'block';
    loading.style.width = '70%';
    document.getElementById('engine-status').innerText = `ENGINE: ${role.toUpperCase()} COMPILING...`;

    try {
      // THIS IS WHERE YOUR API LOGIC LIVES (Similar to your uploaded file)
      // For this demo, we simulate the AI evolution based on your prompt
      
      const response = await fetch("https://api.anthropic.com/v1/messages", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-3-5-sonnet-20240620",
          max_tokens: 4000,
          messages: [{
            role: "user",
            content: `Create a ${role === 'director' ? 'polished web app' : 'complex interactive world/site'} based on this: ${prompt}. Return ONLY the HTML/CSS/JS code.`
          }]
        })
      });

      // Simulation fallback for demo purposes
      setTimeout(() => {
        const mockHTML = `
          <body style="background:#f0f2f5; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh;">
            <div style="background:white; padding:40px; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.1); text-align:center;">
                <h1 style="color:#6366f1">Evolution Manifested</h1>
                <p>Role: ${role}</p>
                <div style="margin-top:20px; font-size:0.8rem; color:#888;">Prompt: "${prompt.substring(0, 50)}..."</div>
            </div>
          </body>`;
        
        currentOutput = mockHTML;
        frame.srcdoc = mockHTML;
        loading.style.width = '100%';
        notif.style.display = 'none';
        document.getElementById('engine-status').innerText = "ENGINE: REALITY STABLE";
        setTimeout(() => loading.style.width = '0%', 500);
      }, 2000);

    } catch (e) {
      console.error(e);
      notif.innerText = "âŒ Connection Error";
    }
  }

  function closePortal() {
    body.classList.remove('split-mode');
  }

  function downloadOutput() {
    if(!currentOutput) return;
    const blob = new Blob([currentOutput], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'world-seed.html';
    a.click();
  }

  // Auto-Save like Notepad-JS
  editor.addEventListener('input', () => {
    localStorage.setItem('paper_prime_content', editor.innerHTML);
  });

  window.onload = () => {
    const saved = localStorage.getItem('paper_prime_content');
    if (saved) editor.innerHTML = saved;
  };
</script>
</body>
</html>
